import{a as f,Q as V}from"./QMarkupTable.a3dbf4d9.js";import{Q as w}from"./QPage.17e8a04d.js";import{_ as B,a3 as P,k as R,r as D,n as i,a9 as h,p as c,q as a,ac as m,ab as b,t as o,s as e,aa as x,a6 as u,u as n,v as l,a5 as _,a4 as k,O as S,a8 as M,a0 as I,ad as C}from"./index.e2b2824f.js";import{Q as L}from"./QSpace.4cb67b41.js";import{Q as y,b as r,a as d}from"./QItemLabel.e5f254a8.js";import{Q as q}from"./QList.dd9c4841.js";import{Q as v}from"./QBtnDropdown.edf02be8.js";import{Q as $,a as z,b as Q}from"./QStepper.51e9f62e.js";import{Q as g}from"./touch.e49db913.js";import{C as A}from"./ClosePopup.102aa753.js";import{u as N}from"./azinaStore.f9809ea1.js";import"./selection.86187dfa.js";import"./QSlideTransition.ec64842a.js";import"./use-panel.158af23c.js";import"./axios.d41ce410.js";const T=P({setup(){const t=N();return R(()=>{t.stopListener()}),{azinaStore:t,step:D(1)}}}),U={class:"q-pa-xs row justify-center"},Y={class:"col-10 q-pt-xl q-mt-xl"},j={class:"q-pa-md"},E={class:"text-left",style:{width:"150px"}},O={class:"text-right"},G={class:"text-right"},H={class:"text-right"},J={class:"text-right"},K={class:"text-right"},W={class:"text-left"},X={class:"text-right"},Z={class:"text-right"},ee={class:"text-right"},te={class:"text-right"},ae={class:"text-right"},ne={class:"gt-md q-pa-xs row justify-center"},oe={key:0,class:"col-12 col-md-6 q-pt-xl q-mt-xl q-px-md"},le={class:"row items-center no-wrap"},se={class:"text-center"},ie={class:"row items-center no-wrap"},de={class:"text-center"},re={class:"row items-center no-wrap"},pe={class:"text-center"},ue={key:1,class:"col-12 col-md-6 q-pt-xl q-mt-xl q-px-md text-dark"},ce={class:"lt-lg q-pa-xs row justify-center"},me={key:0,class:"col-12 col-md-9 q-pt-md q-mt-xs q-px-md q-mb-lg"},fe={class:"row items-center no-wrap"},ye={class:"text-center"},he={class:"row items-center no-wrap"},ge={class:"text-center"},Se={class:"row items-center no-wrap"},ve={class:"text-center"},ze={key:1,class:"col-12 col-md-6 q-pt-xl q-mt-xl q-px-md text-dark"};function be(t,p,ke,Le,qe,xe){return i(),h(b,null,[!t.azinaStore.connected||!t.azinaStore.verified?(i(),c(w,{key:0},{default:a(()=>[o("div",U,[o("div",Y,[o("div",j,[e(V,null,{default:a(()=>[o("thead",null,[o("tr",null,[o("th",E,[e(f,{animation:"blink",type:"text"})]),o("th",O,[e(f,{animation:"blink",type:"text"})]),o("th",G,[e(f,{animation:"blink",type:"text"})]),o("th",H,[e(f,{animation:"blink",type:"text"})]),o("th",J,[e(f,{animation:"blink",type:"text"})]),o("th",K,[e(f,{animation:"blink",type:"text"})])])]),o("tbody",null,[(i(),h(b,null,x(5,s=>o("tr",{key:s},[o("td",W,[e(f,{animation:"blink",type:"text",width:"85px"})]),o("td",X,[e(f,{animation:"blink",type:"text",width:"50px"})]),o("td",Z,[e(f,{animation:"blink",type:"text",width:"35px"})]),o("td",ee,[e(f,{animation:"blink",type:"text",width:"65px"})]),o("td",te,[e(f,{animation:"blink",type:"text",width:"25px"})]),o("td",ae,[e(f,{animation:"blink",type:"text",width:"85px"})])])),64))])]),_:1})])])])]),_:1})):m("",!0),t.azinaStore.connected&&t.azinaStore.verified?(i(),c(w,{key:1},{default:a(()=>[o("div",ne,[t.azinaStore.loans.active.length?(i(),h("div",oe,[e(Q,{modelValue:t.step,"onUpdate:modelValue":p[4]||(p[4]=s=>t.step=s),ref:"stepper",color:"primary",animated:""},{navigation:a(()=>[e($,null,{default:a(()=>[t.step===3&&t.azinaStore.repayFiatAmount>0?(i(),c(u,{key:0,onClick:t.azinaStore.repayLoan,color:"indigo",outline:"",label:"Pay Now"},null,8,["onClick"])):m("",!0),t.step===1||t.step===2&&t.azinaStore.repayFiatAmount>0?(i(),c(u,{key:1,onClick:p[2]||(p[2]=s=>t.$refs.stepper.next()),color:"indigo",outline:"",label:"Continue"})):m("",!0),t.step>1?(i(),c(u,{key:2,flat:"",color:"secondary",onClick:p[3]||(p[3]=s=>t.$refs.stepper.previous()),label:"Back",class:"q-ml-sm"})):m("",!0)]),_:1})]),message:a(()=>[t.step===1?(i(),c(g,{key:0,class:"bg-indigo text-white q-px-lg"},{default:a(()=>[n(" Managing Active Loan: "+l(t.azinaStore.selectedLoan.loanId),1)]),_:1})):t.step===2?(i(),c(g,{key:1,class:"bg-indigo text-white q-px-lg"},{default:a(()=>[n(" Total Loan Balance: "+l(parseFloat(t.azinaStore.selectedLoan.balance).toLocaleString())+" "+l(t.azinaStore.paymentMethods[t.azinaStore.selectedLoan.paymentMethodId-1].symbol),1)]),_:1})):t.step===3?(i(),c(g,{key:2,class:"bg-indigo text-white q-px-lg"},{default:a(()=>[n(" You will receive a prompt to complete the payment. ")]),_:1})):m("",!0)]),default:a(()=>[e(z,{name:1,title:"Select Loan",icon:"payments",done:t.step>1,style:{"min-height":"200px"}},{default:a(()=>[e(_,{class:"section-1"},{default:a(()=>[e(k,null,{default:a(()=>[e(v,{split:"",color:"dark",flat:"","no-caps":""},{label:a(()=>[o("div",le,[e(S,{left:"",name:`img:tokens/${t.azinaStore.selectedLoan.icon}`},null,8,["name"]),o("div",se,[e(L),n(l(t.azinaStore.selectedLoan.loanId),1)])])]),default:a(()=>[(i(!0),h(b,null,x(t.azinaStore.loans.active,s=>(i(),c(q,{key:s.loanId},{default:a(()=>[I((i(),c(y,{clickable:"",onClick:F=>t.azinaStore.changeSelectedLoan(s)},{default:a(()=>[e(r,{avatar:""},{default:a(()=>[e(C,{icon:`img:tokens/${s.icon}`,color:"white","text-color":"white"},null,8,["icon"])]),_:2},1024),e(r,null,{default:a(()=>[e(d,null,{default:a(()=>[n("Collateral: "+l(s.symbol),1)]),_:2},1024),e(d,{caption:""},{default:a(()=>[n("Loan Balance: "+l(s.balance)+" "+l(t.azinaStore.paymentMethods[s.paymentMethodId-1].symbol),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[A]])]),_:2},1024))),128))]),_:1})]),_:1}),e(k,null,{default:a(()=>[e(u,{style:{"pointer-events":"none"},icon:"details",size:"15px",flat:"",class:"text-dark q-ml-lg q-px-xl",rounded:"",color:"indigo",label:"Loan Details For Selected Loan","no-caps":""}),e(q,null,{default:a(()=>[e(y,null,{default:a(()=>[e(r,{avatar:""},{default:a(()=>[e(u,{style:{"pointer-events":"none"},icon:`img:countries/${t.azinaStore.paymentMethods[t.azinaStore.selectedLoan.paymentMethodId-1].currencyIcon}`,size:"15px",flat:"",class:"text-dark q-mr-xs",rounded:"",color:"indigo",label:"Loan Balance","no-caps":""},null,8,["icon"])]),_:1}),e(r,{side:""},{default:a(()=>[e(d,{class:"text-bold q-px-xl"},{default:a(()=>[n("Balance Remaining ")]),_:1}),e(d,{overline:"",class:"q-px-xl"},{default:a(()=>[n(l(parseInt(t.azinaStore.selectedLoan.balance).toLocaleString())+" "+l(t.azinaStore.paymentMethods[t.azinaStore.selectedLoan.paymentMethodId-1].symbol),1)]),_:1})]),_:1})]),_:1}),e(y,null,{default:a(()=>[e(r,{avatar:""},{default:a(()=>[e(u,{style:{"pointer-events":"none"},icon:"av_timer",size:"15px",flat:"",class:"text-dark q-mr-xs",rounded:"",color:"indigo",label:"Duration Remaining","no-caps":""})]),_:1}),e(r,{side:""},{default:a(()=>[e(d,{class:"text-bold q-px-sm"},{default:a(()=>[n("Time Remaining")]),_:1}),e(d,{overline:"",class:"q-px-sm"},{default:a(()=>[n(l(t.azinaStore.selectedLoan.countdown),1)]),_:1})]),_:1})]),_:1}),e(y,null,{default:a(()=>[e(r,{avatar:""},{default:a(()=>[e(u,{style:{"pointer-events":"none"},icon:`img:tokens/${t.azinaStore.selectedLoan.icon}`,size:"15px",flat:"",class:"text-dark q-mr-xs",rounded:"",color:"indigo",label:"Collateral Amount","no-caps":""},null,8,["icon"])]),_:1}),e(r,{side:""},{default:a(()=>[e(d,{class:"q-px-md text-bold"},{default:a(()=>[n("Collateral supplied")]),_:1}),e(d,{overline:"",class:"q-px-md"},{default:a(()=>[n(l(parseFloat(t.azinaStore.selectedLoan.collateralAmount/10**t.azinaStore.selectedLoan.decimals).toFixed(6))+" "+l(t.azinaStore.selectedLoan.symbol),1)]),_:1})]),_:1})]),_:1}),e(y,null,{default:a(()=>[e(r,{avatar:""},{default:a(()=>[e(u,{style:{"pointer-events":"none"},icon:"warning",size:"15px",flat:"",class:"text-dark q-mr-xs",rounded:"",color:"indigo",label:"Liquidation Risk","no-caps":""})]),_:1}),e(r,{side:""},{default:a(()=>[e(d,{class:"q-px-lg q-ml-xs text-bold"},{default:a(()=>[n("LTV")]),_:1}),e(d,{overline:"",class:"q-px-lg"},{default:a(()=>[n(l(t.azinaStore.selectedLoan.ltv)+"%",1)]),_:1})]),_:1}),e(r,{side:""},{default:a(()=>[e(d,{class:"text-bold q-px-xs"},{default:a(()=>[n("Liquidation Price")]),_:1}),e(d,{overline:"",class:"q-px-xs"},{default:a(()=>[n(l(t.azinaStore.selectedLoan.liquidationPrice)+" USD",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["done"]),e(z,{name:2,title:"Amount and Payment Method",icon:"payments",done:t.step>2,style:{"min-height":"200px"}},{default:a(()=>[e(M,{outlined:"",modelValue:t.azinaStore.repayFiatAmount,"onUpdate:modelValue":p[1]||(p[1]=s=>t.azinaStore.repayFiatAmount=s),"label-color":"dark",label:"Amount ","input-class":"text-dark text-bold text-h6",clearable:"","stack-label":"",dense:t.dense},{append:a(()=>[e(u,{outline:"",rounded:"","no-caps":"",color:"indigo",label:"Max",size:"10px",onClick:p[0]||(p[0]=s=>t.azinaStore.repayFiatAmount=parseInt(t.azinaStore.selectedLoan.balance))}),e(v,{split:"",color:"dark",style:{"pointer-events":"none"},flat:"","no-caps":""},{label:a(()=>[o("div",ie,[e(S,{left:"",name:`img:countries/${t.azinaStore.paymentMethods[t.azinaStore.selectedLoan.paymentMethodId-1].currencyIcon}`},null,8,["name"]),o("div",de,l(t.azinaStore.paymentMethods[t.azinaStore.selectedLoan.paymentMethodId-1].symbol),1)])]),_:1}),e(v,{split:"",color:"dark",style:{"pointer-events":"none"},flat:"","no-caps":""},{label:a(()=>[o("div",re,[e(S,{left:"",name:`img:payments/${t.azinaStore.paymentMethods[t.azinaStore.selectedLoan.paymentMethodId-1].icon}`},null,8,["name"]),o("div",pe,[e(L),n(l(t.azinaStore.paymentMethods[t.azinaStore.selectedLoan.paymentMethodId-1].name),1)])])]),_:1})]),_:1},8,["modelValue","dense"])]),_:1},8,["done"]),e(z,{name:3,title:"Confirm",icon:"assignment",style:{"min-height":"200px"}},{default:a(()=>[n(" Make sure your phone is unlocked and you have sufficient funds. ")]),_:1})]),_:1},8,["modelValue"])])):m("",!0),t.azinaStore.loans.active.length?m("",!0):(i(),h("div",ue,[e(g,{"inline-actions":"",rounded:""},{action:a(()=>[e(u,{outline:"",align:"right",color:"indigo",to:"/request",label:"Request Loan Now"})]),default:a(()=>[n(" You currently don't have any active loans. ")]),_:1})]))]),o("div",ce,[t.azinaStore.loans.active.length?(i(),h("div",me,[e(Q,{modelValue:t.step,"onUpdate:modelValue":p[9]||(p[9]=s=>t.step=s),ref:"stepper",color:"primary",animated:""},{navigation:a(()=>[e($,null,{default:a(()=>[t.step===3&&t.azinaStore.repayFiatAmount>0?(i(),c(u,{key:0,onClick:t.azinaStore.repayLoan,color:"indigo",outline:"",label:"Pay Now"},null,8,["onClick"])):m("",!0),t.step===1||t.step===2&&t.azinaStore.repayFiatAmount>0?(i(),c(u,{key:1,onClick:p[7]||(p[7]=s=>t.$refs.stepper.next()),color:"indigo",outline:"",label:"Continue"})):m("",!0),t.step>1?(i(),c(u,{key:2,flat:"",color:"secondary",onClick:p[8]||(p[8]=s=>t.$refs.stepper.previous()),label:"Back",class:"q-ml-sm"})):m("",!0)]),_:1})]),message:a(()=>[t.step===1?(i(),c(g,{key:0,class:"bg-indigo text-white q-px-lg"},{default:a(()=>[n(" Managing Active Loan: "+l(t.azinaStore.selectedLoan.loanId),1)]),_:1})):t.step===2?(i(),c(g,{key:1,class:"bg-indigo text-white q-px-lg"},{default:a(()=>[n(" Total Loan Balance: "+l(parseFloat(t.azinaStore.selectedLoan.balance).toLocaleString())+" "+l(t.azinaStore.paymentMethods[t.azinaStore.selectedLoan.paymentMethodId-1].symbol),1)]),_:1})):t.step===3?(i(),c(g,{key:2,class:"bg-indigo text-white q-px-lg"},{default:a(()=>[n(" You will receive a prompt to complete the payment. ")]),_:1})):m("",!0)]),default:a(()=>[e(z,{name:1,title:"Select Loan",icon:"payments",done:t.step>1,style:{"min-height":"200px"}},{default:a(()=>[e(_,{class:"section-1"},{default:a(()=>[e(k,null,{default:a(()=>[e(v,{split:"",color:"dark",flat:"","no-caps":""},{label:a(()=>[o("div",fe,[e(S,{left:"",name:`img:tokens/${t.azinaStore.selectedLoan.icon}`},null,8,["name"]),o("div",ye,[e(L),n(l(t.azinaStore.selectedLoan.loanId),1)])])]),default:a(()=>[(i(!0),h(b,null,x(t.azinaStore.loans.active,s=>(i(),c(q,{key:s.loanId},{default:a(()=>[I((i(),c(y,{clickable:"",onClick:F=>t.azinaStore.changeSelectedLoan(s)},{default:a(()=>[e(r,{avatar:""},{default:a(()=>[e(C,{icon:`img:tokens/${s.icon}`,color:"white","text-color":"white"},null,8,["icon"])]),_:2},1024),e(r,null,{default:a(()=>[e(d,null,{default:a(()=>[n("Collateral: "+l(s.symbol),1)]),_:2},1024),e(d,{caption:""},{default:a(()=>[n("Loan Balance: "+l(s.balance)+" "+l(t.azinaStore.paymentMethods[s.paymentMethodId-1].symbol),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[A]])]),_:2},1024))),128))]),_:1})]),_:1}),e(k,null,{default:a(()=>[e(u,{style:{"pointer-events":"none"},icon:"details",size:"15px",flat:"",class:"text-dark q-ml-lg q-px-xl",rounded:"",color:"indigo",label:"Loan Details For Selected Loan","no-caps":""}),e(q,null,{default:a(()=>[e(y,null,{default:a(()=>[e(r,{avatar:""},{default:a(()=>[e(u,{style:{"pointer-events":"none"},icon:`img:countries/${t.azinaStore.paymentMethods[t.azinaStore.selectedLoan.paymentMethodId-1].currencyIcon}`,size:"15px",flat:"",class:"text-dark q-mr-xs",rounded:"",color:"indigo",label:"Loan Balance","no-caps":""},null,8,["icon"])]),_:1}),e(r,{side:""},{default:a(()=>[e(d,{class:"text-bold q-px-xl"},{default:a(()=>[n("Balance Remaining ")]),_:1}),e(d,{overline:"",class:"q-px-xl"},{default:a(()=>[n(l(parseInt(t.azinaStore.selectedLoan.balance).toLocaleString())+" "+l(t.azinaStore.paymentMethods[t.azinaStore.selectedLoan.paymentMethodId-1].symbol),1)]),_:1})]),_:1})]),_:1}),e(y,null,{default:a(()=>[e(r,{avatar:""},{default:a(()=>[e(u,{style:{"pointer-events":"none"},icon:"av_timer",size:"15px",flat:"",class:"text-dark q-mr-xs",rounded:"",color:"indigo",label:"Duration Remaining","no-caps":""})]),_:1}),e(r,{side:""},{default:a(()=>[e(d,{class:"text-bold q-px-sm"},{default:a(()=>[n("Time Remaining")]),_:1}),e(d,{overline:"",class:"q-px-sm"},{default:a(()=>[n(l(t.azinaStore.selectedLoan.countdown),1)]),_:1})]),_:1})]),_:1}),e(y,null,{default:a(()=>[e(r,{avatar:""},{default:a(()=>[e(u,{style:{"pointer-events":"none"},icon:`img:tokens/${t.azinaStore.selectedLoan.icon}`,size:"15px",flat:"",class:"text-dark q-mr-xs",rounded:"",color:"indigo",label:"Collateral Amount","no-caps":""},null,8,["icon"])]),_:1}),e(r,{side:""},{default:a(()=>[e(d,{class:"q-px-md text-bold"},{default:a(()=>[n("Collateral supplied")]),_:1}),e(d,{overline:"",class:"q-px-md"},{default:a(()=>[n(l(parseFloat(t.azinaStore.selectedLoan.collateralAmount/10**t.azinaStore.selectedLoan.decimals).toFixed(6))+" "+l(t.azinaStore.selectedLoan.symbol),1)]),_:1})]),_:1})]),_:1}),e(y,null,{default:a(()=>[e(r,{avatar:""},{default:a(()=>[e(u,{style:{"pointer-events":"none"},icon:"warning",size:"15px",flat:"",class:"text-dark q-mr-xs",rounded:"",color:"indigo",label:"Liquidation Risk","no-caps":""})]),_:1}),e(r,{side:""},{default:a(()=>[e(d,{class:"q-px-lg q-ml-xs text-bold"},{default:a(()=>[n("LTV")]),_:1}),e(d,{overline:"",class:"q-px-lg"},{default:a(()=>[n(l(t.azinaStore.selectedLoan.ltv)+"%",1)]),_:1})]),_:1}),e(r,{side:""},{default:a(()=>[e(d,{class:"text-bold q-px-xs"},{default:a(()=>[n("Liquidation Price")]),_:1}),e(d,{overline:"",class:"q-px-xs"},{default:a(()=>[n(l(t.azinaStore.selectedLoan.liquidationPrice)+" USD",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["done"]),e(z,{name:2,title:"Amount and Payment Method",icon:"payments",done:t.step>2,style:{"min-height":"200px"}},{default:a(()=>[e(M,{outlined:"",modelValue:t.azinaStore.repayFiatAmount,"onUpdate:modelValue":p[6]||(p[6]=s=>t.azinaStore.repayFiatAmount=s),"label-color":"dark",label:"Amount ","input-class":"text-dark text-bold text-h6",clearable:"","stack-label":"",dense:t.dense},{append:a(()=>[e(u,{outline:"",rounded:"","no-caps":"",color:"indigo",label:"Max",size:"10px",onClick:p[5]||(p[5]=s=>t.azinaStore.repayFiatAmount=parseInt(t.azinaStore.selectedLoan.balance))}),e(v,{split:"",color:"dark",style:{"pointer-events":"none"},flat:"","no-caps":""},{label:a(()=>[o("div",he,[e(S,{left:"",name:`img:countries/${t.azinaStore.paymentMethods[t.azinaStore.selectedLoan.paymentMethodId-1].currencyIcon}`},null,8,["name"]),o("div",ge,l(t.azinaStore.paymentMethods[t.azinaStore.selectedLoan.paymentMethodId-1].symbol),1)])]),_:1}),e(v,{split:"",color:"dark",style:{"pointer-events":"none"},flat:"","no-caps":""},{label:a(()=>[o("div",Se,[e(S,{left:"",name:`img:payments/${t.azinaStore.paymentMethods[t.azinaStore.selectedLoan.paymentMethodId-1].icon}`},null,8,["name"]),o("div",ve,[e(L),n(l(t.azinaStore.paymentMethods[t.azinaStore.selectedLoan.paymentMethodId-1].name),1)])])]),_:1})]),_:1},8,["modelValue","dense"])]),_:1},8,["done"]),e(z,{name:3,title:"Confirm",icon:"assignment",style:{"min-height":"200px"}},{default:a(()=>[n(" Make sure your phone is unlocked and you have sufficient funds. ")]),_:1})]),_:1},8,["modelValue"])])):m("",!0),t.azinaStore.loans.active.length?m("",!0):(i(),h("div",ze,[e(g,{"inline-actions":"",rounded:""},{action:a(()=>[e(u,{outline:"",align:"right",color:"indigo",to:"/request",label:"Request Loan Now"})]),default:a(()=>[n(" You currently don't have any active loans. ")]),_:1})]))])]),_:1})):m("",!0)],64)}var Te=B(T,[["render",be]]);export{Te as default};
